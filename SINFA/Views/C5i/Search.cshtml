@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var resultado = ViewBag.Resultado;
    var texto = ViewBag.texto;
    var total = ViewBag.total;
}

<section class="d-flex flex-col justify-content-center responsive-x-padding mt-5 mb-5">
    <a class="mb-3" href="/C5i"><h3><i class="bi bi-arrow-left"></i> Panel Principal</h3></a>
    <h2>Busqueda</h2>
    <div class="d-flex justify-content-between">
        <div class="col-lg-6 no-bootstrap-padding d-flex">
            @using (Html.BeginForm("Search", "c5i", FormMethod.Post))
            {
                <input class="full-width pl-3 mr-2" id="search" type="text" name="texto" spellcheck="true" placeholder="Buscar dentro de este diario...">
                <button class="btn btn-success btn-buscar" type="submit" id="searchButton"><i class="bi bi-search"></i>  Buscar</button>

            }
        </div>
    </div>
</section>

<section class="d-flex responsive-x-padding">
    <hr class="view-hr">
</section>

<div class="d-flex responsive-x-padding flex-column">
    <h5><strong>Resultados Encontrados:</strong> &nbsp;<span>@total</span></h5>
    <div class="resultados-wrap ml50">
        <hr />
        <!--bucle-->

        @foreach (var item in resultado)
        {
            <div id="notaResumida" class="border rounded w-100 p-4 mt-3 background-primary">
                <div class="nota">
                    <div class="d-flex">
                        <div class="col-lg-8 no-bootstrap-padding">
                            <h3 class="mb-4">
                                <b>
                                    @{
                                        string asunto = item.asunto;
                                        var detalle = item.detalles.Value;

                                    }
                                    @Html.Raw(asunto.Replace(texto, "<span style='background:yellow;Color:black'>" + texto + "</span>"))
                                </b>
                            </h3>
                        </div>
                        <div class="col-lg-4 no-bootstrap-padding d-flex justify-content-end">
                            <!--@if (item.estadoDiario != "1" && Session["Acceso"].ToString() == "1")
                            {
                                <a class="boton-rapido hover-accent border-right" title="Editar esta nota" href="/C5i/EditarNota/@item.id_nota"><i class="lni lni-pencil"></i></a>
                                <button class="boton-rapido hover-cancel" type="button" id="EliminarNota" title="Eliminar esta nota" data-id="@item.id_nota"><b>X</b></button>
                            }-->
                        </div>
                    </div>
                    <div class="d-flex justify-content-between h-100">

                        <div class="col-lg-8 flex-column d-flex justify-content-between no-bootstrap-padding">
                            <p>
                                @Html.Raw(detalle.Replace(texto, "<span style='background:yellow;Color:black'>" + texto + "</span>"))
                            </p>
                            <div class="d-flex justify-content-start flex-column">
                                <h4 class="secondary-text"><span class="mini-subtitle"><i class="bi bi-geo-alt"></i> @item.direccion</span>, @item.sector, @item.municipio, @item.provincia</h4>
                                <h4 class="secondary-text"><i class="bi bi-clock"></i> @item.hora</h4>
                            </div>
                            <!---<h5 class="mini-subtitle">Escribiente: <span id="nombreEscribiente">@item.rango. @item.nombres @item.apellidos., @item.institucion</span></h5>-->
                        </div>

                        <div class="col-lg-4">
                            <div class="diario-img-wrap overflow-hidden w-100 h-100">
                                <img class="w-100" src="~/img/blank-img.png" />
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        }
    </div>
</div>

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script src="~/Scripts/scripts/sweetalert.js"></script>
<script src="~/Scripts/scripts/C5i/Diario/Diario.js"></script>